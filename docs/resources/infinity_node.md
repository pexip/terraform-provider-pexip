---
page_title: "pexip_infinity_node Resource - terraform-provider-pexip"
subcategory: ""
description: |-
  Manages a Pexip Infinity worker node.
---

# pexip_infinity_node (Resource)

Manages a Pexip Infinity worker node. This resource registers and manages the lifecycle of worker nodes in the Pexip Infinity cluster.

## Example Usage

### Basic Usage

```terraform
resource "pexip_infinity_node" "worker" {
  name   = "worker-node-01"
  config = data.pexip_infinity_manager_config.primary.rendered
}
```

### Multiple Nodes with Count

```terraform
resource "pexip_infinity_node" "workers" {
  count  = 3
  name   = "worker-${count.index + 1}"
  config = data.pexip_infinity_manager_config.primary.rendered
}
```

### Auto-Generated Names

```terraform
# Name will be auto-generated by the API
resource "pexip_infinity_node" "worker" {
  config = data.pexip_infinity_manager_config.primary.rendered
}
```

## Schema

### Required

- `config` (String) - Bootstrap configuration for the Infinity node. This should be the `rendered` output from a `pexip_infinity_manager_config` data source.

### Optional

- `name` (String) - The name of the Infinity node. This should be unique within the Infinity cluster. If not provided, a name will be auto-generated by the API.

### Read-Only

- `id` (String) - The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
terraform import pexip_infinity_node.example 123
```

Where `123` is the numeric ID of the Infinity node.

## Usage Notes

### Node Names
- Node names should be unique within the Infinity cluster
- If no name is provided, the API will auto-generate one
- Names cannot be changed after creation (forces replacement)

### Configuration
- The `config` parameter should contain the bootstrap configuration from a `pexip_infinity_manager_config` data source
- Configuration changes will trigger node replacement
- Ensure the configuration is valid JSON before applying

### Node Lifecycle
- Creating a node registers it with the Infinity Manager
- Updating a node's configuration will replace the node
- Destroying a node removes it from the cluster
- Nodes may take some time to become fully operational after creation

## Example with Data Source

```terraform
# Generate manager configuration
data "pexip_infinity_manager_config" "primary" {
  hostname              = "manager-01"
  domain                = "company.com"
  ip                    = "10.0.1.10"
  mask                  = "255.255.255.0"
  gw                    = "10.0.1.1"
  dns                   = "8.8.8.8"
  ntp                   = "pool.ntp.org"
  user                  = "admin"
  pass                  = var.manager_password
  admin_password        = var.admin_password
  error_reports         = false
  enable_analytics      = false
  contact_email_address = "admin@company.com"
}

# Create worker nodes using the configuration
resource "pexip_infinity_node" "primary_workers" {
  count  = var.worker_count
  name   = "primary-worker-${count.index + 1}"
  config = data.pexip_infinity_manager_config.primary.rendered
}
```

## Troubleshooting

### Common Issues

**Node Creation Fails**
- Verify the bootstrap configuration is valid JSON
- Ensure the Infinity Manager is accessible
- Check that you have permissions to create nodes

**Node Not Appearing in Cluster**
- Nodes may take time to register and become operational
- Verify network connectivity between node and manager
- Check the bootstrap configuration contains correct manager details

**Import Fails**
- Ensure you're using the numeric node ID, not the name
- Verify the node exists in the Infinity cluster
- Check your provider authentication credentials